######################################################
# Makefile is generated by ./vcxproj_make.py
# Don't edit the Makefile -- update the python script
######################################################

BINDIR := ../bin
OBJDIR := o
BINPATH := $(BINDIR)/reseek

CC = gcc
CFLAGS :=  -flto -ffast-math -march=native -O3 -DNDEBUG

CPP = g++
CPPFLAGS :=  -flto -ffast-math -march=native -O3 -DNDEBUG

UNAME_S := $(shell uname -s)
LDFLAGS := $(LDFLAGS)  -flto -ffast-math -march=native -O3
ifeq ($(UNAME_S),Linux)
    LDFLAGS += -static
endif

HDRS = \
  abcxyz.h \
  alpha.h \
  bcadata.h \
  best.h \
  binner.h \
  calibratesearcher.h \
  calibratesearcher2.h \
  chainbag.h \
  chainer.h \
  chainreader2.h \
  cif.h \
  cigar.h \
  cigar_template.h \
  cmds.h \
  cmprof.h \
  counters.h \
  crc32.h \
  daliscorer.h \
  dbsearcher.h \
  deflate.h \
  derepper.h \
  diag.h \
  diaghsp.h \
  distmxsearcher.h \
  dss.h \
  dssaligner.h \
  dssparams.h \
  duper.h \
  fast_erf.h \
  fastaseqsource.h \
  featurelist.h \
  features.h \
  fileseqsource.h \
  filler.h \
  floatfeatures.h \
  getticks.h \
  gobuff.h \
  gzguts.h \
  inffast.h \
  inffixed.h \
  inflate.h \
  inftrees.h \
  intfeatures.h \
  linereader.h \
  linereader2.h \
  logodds.h \
  megacluster.h \
  mermx.h \
  mudex.h \
  mukmerfilter.h \
  mumx.h \
  murmur.h \
  museqsource.h \
  mx.h \
  myallocator.h \
  mymalloc.h \
  mymutex.h \
  myopts.h \
  myutils.h \
  obj.h \
  objcounter.h \
  objmgr.h \
  objtype.h \
  objtypes.h \
  output.h \
  parasail.h \
  pathinfo.h \
  pdbchain.h \
  pdbfilescanner.h \
  prefiltermu.h \
  prefiltermuparams.h \
  primes.h \
  profileloader.h \
  quarts.h \
  rankedscoresbag.h \
  reseek_calibrate.h \
  scalarparams.h \
  scop40bench.h \
  seedtrainer.h \
  seqdb.h \
  seqfeeder.h \
  seqinfo.h \
  seqsource.h \
  sfasta.h \
  sort.h \
  spher.h \
  statsig.h \
  sweeper.h \
  swtrace.h \
  timers.h \
  timing.h \
  todo.h \
  tracebit.h \
  trainer.h \
  trees.h \
  twohitdiag.h \
  usage.h \
  userfieldnames.h \
  userfields.h \
  xdpmem.h \
  zconf.h \
  zlib.h \
  zutil.h \

OBJS = \
  $(OBJDIR)/abcxyz.o \
  $(OBJDIR)/alignselfrev.o \
  $(OBJDIR)/align_bag.o \
  $(OBJDIR)/alpha.o \
  $(OBJDIR)/alpha2.o \
  $(OBJDIR)/b62.o \
  $(OBJDIR)/bcadata.o \
  $(OBJDIR)/cca.o \
  $(OBJDIR)/cmd_prefiltermu.o \
  $(OBJDIR)/convert_foldseekdb.o \
  $(OBJDIR)/create_foldseekdb.o \
  $(OBJDIR)/diaghsp.o \
  $(OBJDIR)/duper.o \
  $(OBJDIR)/foldseek_utils.o \
  $(OBJDIR)/global.o \
  $(OBJDIR)/binner.o \
  $(OBJDIR)/lddt_bench.o \
  $(OBJDIR)/mmseqs_index_dump.o \
  $(OBJDIR)/muprefilter.o \
  $(OBJDIR)/mymutex.o \
  $(OBJDIR)/prefiltermu.o \
  $(OBJDIR)/prepare_query.o \
  $(OBJDIR)/rankedscoresbag.o \
  $(OBJDIR)/cif2pdb.o \
  $(OBJDIR)/search.o \
  $(OBJDIR)/blosum.o \
  $(OBJDIR)/blosum62.o \
  $(OBJDIR)/calibrate.o \
  $(OBJDIR)/calibrate2.o \
  $(OBJDIR)/calibrate3.o \
  $(OBJDIR)/calibrate5.o \
  $(OBJDIR)/calibrate5a.o \
  $(OBJDIR)/calibrate7.o \
  $(OBJDIR)/calibratesearcher.o \
  $(OBJDIR)/calibrate_masm.o \
  $(OBJDIR)/chainbag.o \
  $(OBJDIR)/chainer.o \
  $(OBJDIR)/chainreader2.o \
  $(OBJDIR)/chains2pdbs.o \
  $(OBJDIR)/cif.o \
  $(OBJDIR)/cigar.o \
  $(OBJDIR)/cmprof.o \
  $(OBJDIR)/cmprof_train.o \
  $(OBJDIR)/convert.o \
  $(OBJDIR)/convert2mu.o \
  $(OBJDIR)/daliscorer.o \
  $(OBJDIR)/daliscore_msas2.o \
  $(OBJDIR)/daliscore_msa.o \
  $(OBJDIR)/daliscore_msas.o \
  $(OBJDIR)/daliscore_tsv.o \
  $(OBJDIR)/diag.o \
  $(OBJDIR)/distmx.o \
  $(OBJDIR)/explore1.o \
  $(OBJDIR)/getchains.o \
  $(OBJDIR)/lddt.o \
  $(OBJDIR)/lddt_foldmason.o \
  $(OBJDIR)/lddt_msa.o \
  $(OBJDIR)/lddt_msas.o \
  $(OBJDIR)/lddt_msa_foldmason.o \
  $(OBJDIR)/lddt_muscle.o \
  $(OBJDIR)/mudex.o \
  $(OBJDIR)/mukmerfilter.o \
  $(OBJDIR)/mermx.o \
  $(OBJDIR)/msta_lddtmuw1.o \
  $(OBJDIR)/msta_lddtmuw.o \
  $(OBJDIR)/msta_score.o \
  $(OBJDIR)/msta_scores.o \
  $(OBJDIR)/mukmerfilter2.o \
  $(OBJDIR)/museqsource.o \
  $(OBJDIR)/mu_mapping.o \
  $(OBJDIR)/alignpair.o \
  $(OBJDIR)/mymalloc.o \
  $(OBJDIR)/mymalloc_dbg.o \
  $(OBJDIR)/mymalloc_gcc.o \
  $(OBJDIR)/mymalloc_win_debug.o \
  $(OBJDIR)/objcounter.o \
  $(OBJDIR)/output.o \
  $(OBJDIR)/pdb.o \
  $(OBJDIR)/postmufilter.o \
  $(OBJDIR)/prime.o \
  $(OBJDIR)/profileloader.o \
  $(OBJDIR)/md5.o \
  $(OBJDIR)/pdbchaincal.o \
  $(OBJDIR)/pdbfilescanner.o \
  $(OBJDIR)/gumbel.o \
  $(OBJDIR)/gzipfileio.o \
  $(OBJDIR)/linereader2.o \
  $(OBJDIR)/parasail.o \
  $(OBJDIR)/parasail_cigar.o \
  $(OBJDIR)/parasail_mu.o \
  $(OBJDIR)/pdb2mega.o \
  $(OBJDIR)/readhits.o \
  $(OBJDIR)/runquery.o \
  $(OBJDIR)/runself.o \
  $(OBJDIR)/runthreads.o \
  $(OBJDIR)/scop40bit.o \
  $(OBJDIR)/mumx.o \
  $(OBJDIR)/mumx_data.o \
  $(OBJDIR)/dali.o \
  $(OBJDIR)/dbsearcher.o \
  $(OBJDIR)/derepper.o \
  $(OBJDIR)/dss.o \
  $(OBJDIR)/dssaligner.o \
  $(OBJDIR)/dssparams.o \
  $(OBJDIR)/features.o \
  $(OBJDIR)/float_feature_bins.o \
  $(OBJDIR)/getbins.o \
  $(OBJDIR)/kabsch.o \
  $(OBJDIR)/logaln.o \
  $(OBJDIR)/logodds.o \
  $(OBJDIR)/mergefwdback.o \
  $(OBJDIR)/msa2cmp.o \
  $(OBJDIR)/murmurhash.o \
  $(OBJDIR)/myss.o \
  $(OBJDIR)/namedparams.o \
  $(OBJDIR)/prettyaln.o \
  $(OBJDIR)/scalar_sweep.o \
  $(OBJDIR)/scop40bench.o \
  $(OBJDIR)/scop40benchroc.o \
  $(OBJDIR)/seqfeeder.o \
  $(OBJDIR)/shuffle.o \
  $(OBJDIR)/split.o \
  $(OBJDIR)/statsig.o \
  $(OBJDIR)/sweeper.o \
  $(OBJDIR)/swfastpinop.o \
  $(OBJDIR)/swfastpinopgapless.o \
  $(OBJDIR)/swgapless.o \
  $(OBJDIR)/swgaplessint.o \
  $(OBJDIR)/swgaplessprof.o \
  $(OBJDIR)/swgaplessprofb.o \
  $(OBJDIR)/testmodel.o \
  $(OBJDIR)/testmodel2.o \
  $(OBJDIR)/test_chrono_ticks.o \
  $(OBJDIR)/test_para.o \
  $(OBJDIR)/test_para_cal.o \
  $(OBJDIR)/test_para_path.o \
  $(OBJDIR)/test_xdrop.o \
  $(OBJDIR)/timing.o \
  $(OBJDIR)/tracealn.o \
  $(OBJDIR)/tracebackbitmem.o \
  $(OBJDIR)/trained_features.o \
  $(OBJDIR)/train_features.o \
  $(OBJDIR)/twohitdiag.o \
  $(OBJDIR)/userfields.o \
  $(OBJDIR)/valuetoint.o \
  $(OBJDIR)/one2three.o \
  $(OBJDIR)/fastaseqsource.o \
  $(OBJDIR)/fileseqsource.o \
  $(OBJDIR)/getss.o \
  $(OBJDIR)/sscluster.o \
  $(OBJDIR)/trainer.o \
  $(OBJDIR)/usage.o \
  $(OBJDIR)/linereader.o \
  $(OBJDIR)/mx.o \
  $(OBJDIR)/myutils.o \
  $(OBJDIR)/objmgr.o \
  $(OBJDIR)/reseek_main.o \
  $(OBJDIR)/readchains.o \
  $(OBJDIR)/pdbchain.o \
  $(OBJDIR)/quarts.o \
  $(OBJDIR)/spher.o \
  $(OBJDIR)/sw.o \
  $(OBJDIR)/seqdb.o \
  $(OBJDIR)/seqinfo.o \
  $(OBJDIR)/seqsource.o \
  $(OBJDIR)/sfasta.o \
  $(OBJDIR)/sort.o \
  $(OBJDIR)/viterbifastmem.o \
  $(OBJDIR)/writelocalaln.o \
  $(OBJDIR)/xdropbwd.o \
  $(OBJDIR)/xdropfwd.o \
  $(OBJDIR)/xdrophsp.o \
  $(OBJDIR)/zscorer.o \
  $(OBJDIR)/adler32.o \
  $(OBJDIR)/crc32.o \
  $(OBJDIR)/deflate.o \
  $(OBJDIR)/gzlib.o \
  $(OBJDIR)/gzread.o \
  $(OBJDIR)/infback.o \
  $(OBJDIR)/inffast.o \
  $(OBJDIR)/inflate.o \
  $(OBJDIR)/inftrees.o \
  $(OBJDIR)/trees.o \
  $(OBJDIR)/zutil.o \

.PHONY: clean

$(BINPATH) : $(BINDIR)/ $(OBJDIR)/ $(OBJS)
	$(CPP) $(LDFLAGS) $(OBJS) -o $(BINPATH)
	strip $(BINPATH)

$(OBJDIR)/ :
	mkdir -p $(OBJDIR)/

$(BINDIR)/ :
	mkdir -p $(BINDIR)/

$(OBJDIR)/%.o : %.c $(HDRS)
	$(CC) $(CFLAGS) -c -o $@ $<

$(OBJDIR)/%.o : %.cpp $(HDRS)
	$(CPP) $(CPPFLAGS) -c -o $@ $<
